<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lab 4 - Mobile Applications for Engineers and Technologists</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../Lab_1/Lab_1.html">Lab 1</a></li><li class="chapter-item expanded affix "><a href="../Lab_2/Lab_2.html">Lab 2</a></li><li class="chapter-item expanded affix "><a href="../Lab_3/Lab_3.html">Lab 3</a></li><li class="chapter-item expanded affix "><a href="../Lab_4/Lab_4.html" class="active">Lab 4</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><div>Comp1836 Assignment 1</div></li><li class="chapter-item expanded affix "><div>Comp1836 Assignment 2</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><div>ELEE1146 Assignment</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Mobile Applications for Engineers and Technologists</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/cccu-uk/ELEE1149-COMP1836_Exercises" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/cccu-uk/ELEE1149-COMP1836_Exercises/edit/master/content/Lab_4/Lab_4.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="lab-4-android-user-input-variables-and-operations-part-1"><a class="header" href="#lab-4-android-user-input-variables-and-operations-part-1">Lab 4 Android User Input, Variables and Operations. Part 1</a></h1>
<blockquote>
<p>You will need to download the following picture folder -&gt; <a href="Lab_4_Pictures.zip">Lab_4_Picture.zip</a></p>
</blockquote>
<h2 id="1-concert-ticket-app"><a class="header" href="#1-concert-ticket-app">1. Concert Ticket App</a></h2>
<p>You are to develop a Concert Tickets App as shown below:</p>
<div align=center>
<p><img src="figures/concertAppFinished.png" alt="" /></p>
</div>
<p>In the field <strong>Number of Tickets</strong>, you are to enter a positive integer.  You can also choose from the drop-down list the concert you are interested in and then click the <strong>FIND THE COST</strong> button.  Then the cost of the tickets will be displayed just above the picture as shown below (it is assumed that a single ticket is priced at £79.99):</p>
<div align=center>
<p><img src="./figures/concertAppFinishedPrice2.png" alt="" /></p>
</div>
<h3 id="using-the-string-table"><a class="header" href="#using-the-string-table">Using the String Table</a></h3>
<ul>
<li>
<p>Double click on the strings.xml file in the values subfolder to display its contents</p>
</li>
<li>
<p>Click the Add key (plus sign) in the Translations Editor and type txtTitle in the Key text box and Ticket Vault in the Default Value text box as shown below:</p>
</li>
</ul>
<div align=center>
<p><img src="./figures/stringTableKey.png" alt="" /></p>
</div>
<ul>
<li>Using the <code>string.xml</code> file add the strings specified in the table below:</li>
</ul>
<pre><code class="language-xml">&lt;string name=&quot;txtTickets&quot;&gt;Number of Tickets&lt;/string&gt; 
&lt;string name=&quot;prompt&quot;&gt;Select Group&lt;/string&gt;
&lt;string name=&quot;description&quot;&gt;Concert Image&lt;/string&gt;
&lt;string name=&quot;btnCost&quot;&gt;FIND THE COST&lt;/string&gt;
</code></pre>
<h3 id="adding-a-string-array"><a class="header" href="#adding-a-string-array">Adding a String Array</a></h3>
<p>Now you need to add a string array, modify the <code>string.xml</code> with the following code:</p>
<pre><code class="language-xml">&lt;string-array name=&quot;txtGroup&quot;&gt;
    &lt;item&gt;Linkin Park&lt;/item&gt;
    &lt;item&gt;Hollywood Undead&lt;/item&gt;
    &lt;item&gt;Man with a Mission&lt;/item&gt;
&lt;/string-array&gt;
</code></pre>
<h3 id="adding-controls-to-the-emulator"><a class="header" href="#adding-controls-to-the-emulator">Adding Controls to the Emulator</a></h3>
<p><strong>Step 1:</strong></p>
<ul>
<li>Click the Save All button on the Standard toolbar and close <code>strings.xml</code> tab.</li>
<li>With <code>activity_main.xml</code> opened and displaying the emulator screen, from the Palette, choose the Common category and then choose the <strong>TextView</strong> widget </li>
<li>Drag the <strong>TextView</strong> widget to the centre of the emulator screen until a dashed vertical line identifying the screen’s centre is displayed and drop it onto the top part of the emulator.</li>
<li>In the Attributes Pane click on the vertical bar next to the <strong>text</strong> attribute to open the Pick a Resource dialog. </li>
<li>Choose <strong>txtTitle</strong> from the list to name the TextView widget.</li>
<li>Press the Ok button.</li>
<li>In the <strong>textSize</strong> property, type <strong>48sp</strong> and the press Enter.</li>
<li>Right click on the <strong>TextView</strong> widget and choose Center/Horizontally form the drop down list. </li>
</ul>
<div align=center>
<p><img src="./figures/pickResource1.png" alt="" /></p>
</div>
<p><strong>Step 2:</strong></p>
<ul>
<li>In the Text category in the Palette, scroll down to the Number control.</li>
<li>Drag and drop the Number control onto the emulator bellow the Ticket Vault text.</li>
<li>Drag the control to the centre of the screen until a dashed vertical line identifying the screen centre is displayed.</li>
<li>Set the <strong>textSize</strong> property to <strong>28sp</strong> from the drop-down list. </li>
</ul>
<h3 id="setting-the-hint-property-for-the-text-field"><a class="header" href="#setting-the-hint-property-for-the-text-field">Setting the Hint Property for the Text Field</a></h3>
<p><strong>Step 1:</strong></p>
<ul>
<li>With the Number control selected in the emulator, find the hint property in the Attributes pane (by typing hint in the search box for example) and then click on the vertical line next to the hint property.</li>
<li>Pick a Resource dialog box will appear.  Click <strong>txtTickets</strong> to select the assigned string. Click the OK button as shown below:</li>
</ul>
<div align=center>
<p><img src="./figures/pickResource2.png" alt="" /></p>
</div>
<h3 id="using-the-android-spinner-control"><a class="header" href="#using-the-android-spinner-control">Using the Android Spinner Control</a></h3>
<p><strong>Step 1:</strong></p>
<ul>
<li>With the <code>activity_main.xml</code> tab open, scroll to view the Containers category in the Palette.</li>
<li>Drag and drop the Spinner control below the Number control and centre it horizontally. </li>
</ul>
<p><strong>Step 2:</strong></p>
<ul>
<li>In the Attributes pane using search facility at the top of the pane, type in prompt and click to the right of the prompt property on the vertical line to display the Pick a Resources dialog box. </li>
<li>Find the prompt and click it to display instructions when the user touches the Spinner control.</li>
<li>Click the OK button as shown below:</li>
</ul>
<div align=center>
<p><img src="./figures/pickResource3.png" alt="" /></p>
</div>
<ul>
<li>In the Attributes pane, click the vertical bar to the right of the entries property.</li>
<li>Choose txtGroup from the dialog box as shown below. Press OK.</li>
</ul>
<div align=center>
<p><img src="./figures/pickResource4.png" alt="" /></p>
</div>
<h3 id="adding-the-button-textview-and-imageview-controls"><a class="header" href="#adding-the-button-textview-and-imageview-controls">Adding the Button, TextView and ImageView Controls</a></h3>
<p><strong>Step 1:</strong></p>
<ul>
<li>In the <code>activity_main.xml</code> tab, the Common category in the Palette, drag the Button control to the emulator and centre it below the Spinner control.</li>
<li>Click on the vertical bar next to the text attribute and from the Pick a Resource dialog box choose btnCost and then press ok. </li>
<li>Change the <strong>textSize</strong> property to <strong>36sp</strong> from the drop-down list and save your work. </li>
</ul>
<p><strong>Step 2:</strong></p>
<ul>
<li>From the Common category in the Palette, choose the <strong>TextView</strong> control and drag the control to the emulator and centre it below the Button control.</li>
<li>Inside the <strong>text</strong> property delete <strong>TextView</strong>.</li>
<li>Change the <strong>textSize</strong> property to <strong>24sp</strong> from the drop-down list. </li>
</ul>
<p><strong>Step 3:</strong></p>
<ul>
<li>To add the <strong>Image View</strong> control, copy the file <code>concert.png</code> from the Pictures folder on moodle to your computer. </li>
<li>Copy the <code>concert.png</code> file (CTRL + C) and then right click the drawable folder in the Android project view pane. Click Paste. From the Choose Destination Directory dialog choose the <strong>drawable folder</strong> and then click the Ok button as shown below.</li>
</ul>
<div align=center>
<p><img src="./figures/pickResource5.png" alt="" /></p>
</div>
<ul>
<li>Click OK on the next Copy dialog which appears to copy the concert.png file into the drawable directory.</li>
<li>From the Common category in the Palette, drag the ImageView control to the emulator and centre it below the TextView control at the bottom of the emulator.</li>
<li>From the Pick a Resources dialog box which appears, choose the concert picture. Now click the OK button.</li>
<li>With the image selected, click the vertical bar to the right of the contentDescription property in the Attributes pane.  Select description and then click the OK button.</li>
</ul>
<p><strong>Step 4:</strong></p>
<ul>
<li>Now apply Infer Constraints by clicking the button on the top of the emulator.</li>
<li>Run the emulator to see if your interface looks like what you expected.  If you are happy with the interface, proceed with the next step.  If not – fix it!</li>
</ul>
<h3 id="coding-the-edittext-class-for-the-textfield-the-spinner-control-and-the-button-control"><a class="header" href="#coding-the-edittext-class-for-the-textfield-the-spinner-control-and-the-button-control">Coding the EditText Class for the TextField, the Spinner Control and the Button Control</a></h3>
<p><strong>Step 1:</strong></p>
<ul>
<li>In the Android project view, expand the java folder and the first folder under it and then double click to open the <code>MainActivity.java</code> file.</li>
<li>Click to the right of the line <code>setContentView(R.layout.activity_main);</code></li>
<li>Press <strong>Enter</strong> to insert a blank line.</li>
<li>To initialize and reference the <code>EditText</code> class with the Id name of <strong>editText</strong> type: 
<ul>
<li><code>final EditText tickets = findViewById(R.id.editTextNumber);</code></li>
</ul>
</li>
<li>After the <code>EditText</code> line, press Enter to create a new line.</li>
<li>To initialize and reference the <code>Spinner</code> control with the Id name of spinner, type:
<ul>
<li><code>final Spinner group = findViewById(R.id.spinner);</code></li>
</ul>
</li>
<li>After you have entered the line above, press Enter. </li>
<li>To initialize the <code>Button</code> control with the id of button type:
<ul>
<li><code>Button cost = findViewById(R.id.button);</code></li>
</ul>
</li>
<li>The result is shown below:</li>
</ul>
<pre><code class="language-java">
package com.example.concerttickets;

import ...

public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText tickets = findViewById(R.id.editTextNumber);
        final Spinner group = findViewById(R.id.spinner);
        final Button cost = findViewById(R.id.button);
        NumberFormat format = NumberFormat.getCurrencyInstance(Locale.ENGLISH);
    }
}
</code></pre>
<h3 id="declaring-variables"><a class="header" href="#declaring-variables">Declaring Variables</a></h3>
<p><strong>Step 1:</strong></p>
<ul>
<li>In <code>MainActivity.java</code> on the line declaring the class, after the <code>{</code>, press Enter:</li>
</ul>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {




@Override
...
</code></pre>
<ul>
<li>Press the Tab key to indent the text, and then insert the following four lines of code to initialize the variables in this activity:</li>
</ul>
<pre><code class="language-java">double costPerTicket = 79.99;
int numberOfTickets;
double totalCost;
String groupChoice;
</code></pre>
<ul>
<li>The result is shown below:</li>
</ul>
<pre><code class="language-java">
package com.example.concerttickets;

import ...

public class MainActivity extends AppCompatActivity {
    
    double costPerTicket = 79.99;
    int numberOfTickets;
    double totalCost;
    String groupChoice;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText tickets = findViewById(R.id.editTextNumber);
        final Spinner group = findViewById(R.id.spinner);
        final Button cost = findViewById(R.id.button);
        NumberFormat format = NumberFormat.getCurrencyInstance(Locale.ENGLISH);
    }
}
</code></pre>
<h3 id="coding-the-onclicklistener"><a class="header" href="#coding-the-onclicklistener">Coding the OnClickListener</a></h3>
<p><strong>Step 1:</strong></p>
<ul>
<li>To code the button listener that awaits user interaction, after the line for the <strong>Button</strong>, type <code>cost.setOn</code> to display an auto-complete listing with all the possible entries that are valid at that point in the code. </li>
<li>Double click on the first <code>OnClickListener</code> to select it.</li>
<li>In the parentheses, type <code>new On</code> to view possible auto-complete options, and then double click the <code>OnClickListener</code> option.</li>
</ul>
<p><strong>Step 2:</strong></p>
<ul>
<li>After the line of code beginning with <code>cost.setOnClickListener</code>, press Enter, and then type:
<ul>
<li><code>final TextView result = findViewById(R.id.txtResult);</code></li>
</ul>
</li>
<li>The result is shown below:</li>
</ul>
<pre><code class="language-java">
package com.example.concerttickets;

import ...

public class MainActivity extends AppCompatActivity {
    
    double costPerTicket = 79.99;
    int numberOfTickets;
    double totalCost;
    String groupChoice;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText tickets = findViewById(R.id.editTextNumber);
        final Spinner group = findViewById(R.id.spinner);
        final Button cost = findViewById(R.id.button);
        
        cost.setOnClickListener(new View.OnClickListener() {
            final TextView result = findViewById(R.id.txtResult);
            @Override
            public void onClick(View v){
            }
        });
    }
}
</code></pre>
<ul>
<li>Now inside the <code>OnClickListener</code> <code>onClick</code> method stub in line 30, press the tab key, and then type:</li>
</ul>
<pre><code class="language-java">numberOfTickets = Integer.parseInt(tickets.getText().toString());
totalCost = costPerTicket * numberOfTickets;
groupChoice = group.getSelectedItem( ).toString( );
result.setText(&quot;Cost for &quot; + groupChoice + &quot; is £&quot; + currency.format(totalCost));
</code></pre>
<ul>
<li>The completed version of the MainActivity.java class should look like shown below:</li>
</ul>
<pre><code class="language-java">
package com.example.concerttickets;

import ...

public class MainActivity extends AppCompatActivity {
    
    double costPerTicket = 79.99;
    int numberOfTickets;
    double totalCost;
    String groupChoice;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText tickets = findViewById(R.id.editTextNumber);
        final Spinner group = findViewById(R.id.spinner);
        final Button cost = findViewById(R.id.button);
        NumberFormat format = NumberFormat.getCurrencyInstance(Locale.ENGLISH);
        cost.setOnClickListener(new View.OnClickListener() {
            final TextView result = findViewById(R.id.txtResult);
            @Override
            public void onClick(View v){
                numberOfTickets = Integer.parseInt(tickets.getText().toString());
                totalCost = costPerTicket * numberOfTickets;
                groupChoice = group.getSelectedItem( ).toString( );
                result.setText(&quot;Cost for &quot; + groupChoice + &quot; is &quot; + format.format(totalCost));
            }
        });
    }
}
</code></pre>
<ul>
<li>Now run the emulator again and check that the app is working correctly. </li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Lab_3/Lab_3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Lab_3/Lab_3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
