<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Concert Ticket App - Mobile Applications for Engineers</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../.././theme/pagetoc.css">
        <link rel="stylesheet" href="../.././theme/css/mdbook-admonish.css">
        <link rel="stylesheet" href="../.././theme/css/code.css">
        <link rel="stylesheet" href="../.././theme/css/terminal.css">
        <link rel="stylesheet" href="../.././theme/css/output.css">
        <link rel="stylesheet" href="../.././theme/css/film.css">
        <link rel="stylesheet" href="../.././theme/css/mdbook-admonish.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dracula">Dracula</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frapp√©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="kanagawa">Knagawa</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="pinkrose">Pinkrose</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="tender">Tender</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="tokyonight">Tokyonight</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Mobile Applications for Engineers</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/uniofgreenwich/ELEE1146-COMP1836_Exercises" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/uniofgreenwich/ELEE1146-COMP1836_Exercises/edit/main/content/Kotlin/Lab_4/Lab_4.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main><div class="sidetoc"><nav class="pagetoc"></nav></div>
                        <h1 id="lab-4-concert-ticket-app"><a class="header" href="#lab-4-concert-ticket-app">Lab 4: Concert Ticket App</a></h1>
<div align=center>
<table>
<tr>
<td style="width: 50%; padding: 10px; border: 0px solid #ddd;">
You will be developing concert ticket app that lets you select predifined bands and check the cost of each ticket.  The Concert Ticket App is demoed right:
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="#admonition-info"></a>
</div>
<div>
<ul>
<li>
<p>You will need to download the following picture folder -&gt; <a href="Lab_4_Pictures.zip">Lab_4_Picture.zip</a></p>
</li>
<li>
<p>The completed project can be found here at end of session -&gt; <a href="https://github.com/UniOfGreenwich/MobileApps-ConcertTickets">https://github.com/UniOfGreenwich/MobileApps-ConcertTickets</a></p>
</li>
</ul>
</div>
</div>
</td>
<td style="width: 50%; padding: 10px; border: 0px solid #ddd;">
<img src="./figures/demo.gif" alt="Demo of App" >
</td>
</tr>
</table>
</div>
<h2 id="colours-used"><a class="header" href="#colours-used">Colours used:</a></h2>
<ul>
<li><p style="background-color:#1E2C41;color:#ffffff">0XFF1E2C41</p>
</li>
<li><p style="background-color:#E3E3E6; color:#000000">0XFFE3E3E6</p>
</li>
</ul>
<hr />
<h2 id="setting-up-the-project"><a class="header" href="#setting-up-the-project">Setting Up the Project</a></h2>
<h3 id="video--113---440"><a class="header" href="#video--113---440">Video @ 1:13 - 4:40</a></h3>
<ol>
<li>
<p><strong>Create a New Project:</strong></p>
<ul>
<li>Select "Empty Activity" and click "Next".</li>
<li>Name your application "Concert Tickets".</li>
<li>Ensure the package name is set to <code>com.uog.concerttickets</code>.</li>
<li>Set the minimum API level to 24.</li>
<li>Click "Finish" to create the project.</li>
</ul>
<p><img src="./figures/choosingLayoutKt.png" alt="" /></p>
</li>
<li>
<p><strong>Adding images and creating logo assest</strong></p>
<ul>
<li>
<p>All the images are available in the Pictures folder downloaded in the zip.  Drag the files to the mipmap folder.</p>
</li>
<li>
<p>For the assest right clock the <code>concert_ticket_logo.png</code> and get the <code>absolute path</code></p>
</li>
<li>
<p>right click the res folder and add new image asset</p>
</li>
<li>
<p>In the Path: field paste the <strong>Absolute File</strong> path you copied earlier, and then select the file.</p>
</li>
<li>
<p>Click the Next button to add the custom launcher icon.</p>
</li>
<li>
<p>On the next dialog window, click the Finish button. The custom icons will be displayed in <code>res/mipmap</code> folder</p>
<p><img src="./figures/logo_asset.gif" alt="" /></p>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="modifying-mainactivity"><a class="header" href="#modifying-mainactivity">Modifying MainActivity</a></h2>
<h3 id="video--440---1735"><a class="header" href="#video--440---1735">Video @ 4.40 - 17.35</a></h3>
<ol>
<li>
<p><strong>Modify the Main Activity Layout:</strong></p>
<ul>
<li>
<p>Open <code>MainActivity.kt</code>.</p>
</li>
<li>
<p>Reprodce this:</p>
  <div id="admonition-code" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-title">
  <div class="admonition-title">
  <div id="admonition-code-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code"></a>
  </div>
  <div>
<pre><code class="language-kotlin">package com.uog.concerttickets

... 

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            ConcertTicketsTheme {
                ConcertTicketApp()
            }
        }
    }
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ConcertTicketApp(){
    Scaffold(
        topBar = {
            TopAppBar(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(50.dp),
                title = { /* TODO */}
            
            )
        }
    ) { innerPadding -&gt;
        Surface(modifier = Modifier.padding(innerPadding)) {
            
        }
    }
}

@Preview(showBackground = true)
@Composable
fun GreetingPreview() {
    ConcertTicketsTheme {
        ConcertTicketApp()
    }
}
</code></pre>
  </div>
  </div>
  <div id="admonition-notes-on-composables-used" class="admonition admonish-info" role="note" aria-labelledby="admonition-notes-on-composables-used-title">
  <div class="admonition-title">
  <div id="admonition-notes-on-composables-used-title">
<p>Notes on Composables Used:</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-notes-on-composables-used"></a>
  </div>
  <div>
<ul>
<li>
<p><strong>Scaffold</strong>: Provides a basic structure for the app‚Äôs layout, including slots for common UI components such as <code>TopAppBar</code>, <code>BottomAppBar</code>,
oatingActionButton<code>, and </code>Drawer`.</p>
</li>
<li>
<p><strong>TopAppBar</strong>: A composable that represents the top app bar, which usually contains the app title, navigation icons, and actions</p>
</li>
<li>
<p><strong>Modifier</strong>: A flexible way to describe how a composable should be laid out, styled, or behave.</p>
</li>
<li>
<p><strong>Surface</strong>:  A composable that provides a background and other properties like elevation and shape, often used as a container for other composables</p>
</li>
<li>
<p><strong>@OptIn</strong>: An annotation that indicates the usage of an experimental API</p>
</li>
<li>
<p><strong>enableEdgeToEdge()</strong>: This function is typically used to set up the app to render edge-to-edge, utilizing the full screen area</p>
</li>
</ul>
  </div>
  </div>
</li>
<li>
<p>You can modify the  title element to hold an image and text:</p>
  <div id="admonition-code-1" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-1-title">
  <div class="admonition-title">
  <div id="admonition-code-1-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-1"></a>
  </div>
  <div>
<pre><code class="language-kt">title = {
    Row(
        verticalAlignment = Alignment.CenterVertically,
        modifier = Modifier.fillMaxWidth()
    ){
        Image(painter = painterResource(id = R.mipmap.concert_ticket_logo),
            contentDescription = "App Logo",
            modifier = Modifier.size(50.dp))

        Spacer(modifier = Modifier
            .align(alignment = Alignment.CenterVertically)
            .background(Color.White))

        Text(
            text = stringResource(id = R.string.app_name), 
            fontWeight = FontWeight.Bold,
            color = Color(0XFF1E2C41))
    }
}
</code></pre>
  </div>
  </div>
</li>
</ul>
 <div align="center">
 <img src="./figures/topBar.png" alt="Image of TopBar" style="width:230px;height:480px;">
 </div>
</li>
</ol>
<ul>
<li>
<p>Modify the string resoucre app_name so that there is a space between the <code>ConcertTickets</code> like so <code>Concert Tickets</code></p>
<p><img src="./figures/stringResource_1.png" alt="" /></p>
</li>
<li>
<p>We need to create several composables that will show the DropDownMenu, TextField, Text, Button and Image, reproduce the following, inside the <code>Surface</code> Composable add the following <code>Column</code>:</p>
  <div id="admonition-code-2" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-2-title">
  <div class="admonition-title">
  <div id="admonition-code-2-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-2"></a>
  </div>
  <div>
<pre><code class="language-kt">...
) { innerPadding -&gt;
    Surface(modifier = Modifier.padding(innerPadding)) {
        Column(modifier = Modifier.fillMaxSize()) {
            // Band Selection
        }
    }
...

</code></pre>
  </div>
  </div>
  <div id="admonition-notes-on-composables-used-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-notes-on-composables-used-1-title">
  <div class="admonition-title">
  <div id="admonition-notes-on-composables-used-1-title">
<p>Notes on Composables Used:</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-notes-on-composables-used-1"></a>
  </div>
  <div>
<ul>
<li>
<p><strong>Row</strong>: Layout composable that arranges its children in a horizontal sequence.</p>
</li>
<li>
<p><strong>Image</strong>: A composable for displaying images.</p>
</li>
<li>
<p><strong>Spacer</strong>: A composable that creates an empty space in the layout</p>
</li>
<li>
<p><strong>Text</strong>: A composable for displaying text.</p>
</li>
<li>
<p><strong>Column</strong>: A layout composable that arranges its children in a vertical sequence</p>
</li>
</ul>
  </div>
  </div>
</li>
</ul>
<h2 id="bandselection-band-and-band-data"><a class="header" href="#bandselection-band-and-band-data">BandSelection, Band and Band Data</a></h2>
<h3 id="video--1735---4410"><a class="header" href="#video--1735---4410">Video @ 17.35 - 44.10</a></h3>
<ul>
<li>
<p>Underneath the ConcertTicketApp Composable create a new Composable that will handle our Band Selection, called <code>BandSelection(selectedBand : Band)</code></p>
<p><img src="./figures/BandSelectionDefinition.png" alt="" /></p>
</li>
<li>
<p>Now we need to create the <code>Band</code> <code>data class</code>, navigate to the top of the file and  between the <code>import</code>'s and the <code>MainActivity</code> definition and create a <code>data Class Band()</code> with the following fields:</p>
  <div id="admonition-code-3" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-3-title">
  <div class="admonition-title">
  <div id="admonition-code-3-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-3"></a>
  </div>
  <div>
<pre><code class="language-kt">data class Band(val name: String, val imageRes: Int, val price: Float)
</code></pre>
  </div>
  </div>
</li>
<li>
<p>Next we need to add the <code>object BandDataSource</code> underneath the <code>data class</code> we just defined, that will hold the static band data:</p>
  <div id="admonition-code-4" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-4-title">
  <div class="admonition-title">
  <div id="admonition-code-4-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-4"></a>
  </div>
  <div>
<pre><code class="language-kt">object BandDataSource {

    val bands = listOf(
        Band("Select a Band", R.mipmap.concert,0.0f),
        Band("Written By Wolves", R.mipmap.written_by_wolves,24.95f),
        Band("Linkin Park", R.mipmap.linkin_park,63.95f),
        Band("Man with a Mission", R.mipmap.man_with_a_mission,36.00f),
        Band("Hollywood Undead", R.mipmap.hollywood_undead,125.00f)
    )
}
</code></pre>
  </div>
  </div>
<p><img src="./figures/bandClass.png" alt="" /></p>
  <div id="admonition-notes-on-kotlin-syntax" class="admonition admonish-note" role="note" aria-labelledby="admonition-notes-on-kotlin-syntax-title">
  <div class="admonition-title">
  <div id="admonition-notes-on-kotlin-syntax-title">
<p>Notes on Kotlin Syntax:</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-notes-on-kotlin-syntax"></a>
  </div>
  <div>
<ul>
<li>
<p><strong>data class</strong>: A <code>data class</code> in Kotlin is used to hold data. It automatically provides several useful methods, such as <code>equals()</code>, <code>hashCode()</code>, <code>toString()</code>, d <code>copy()</code>, based on the properties defined in the class.</p>
</li>
<li>
<p><strong>object</strong>: In Kotlin, the <code>object</code> keyword is used to declare a <strong>singleton</strong>, which means there will be only one instance of <code>BandDataSource</code> in the app.</p>
<ul>
<li><strong>Predefined Band List</strong>: A list containing instances of the <code>Band</code> <code>data class</code>. Each instance has a name, an image resource ID, and a price.</li>
</ul>
</li>
</ul>
  </div>
  </div>
</li>
<li>
<p>Go back to <code>BandSelection</code> Composable and we no modify the arguments and the body:</p>
  <div id="admonition-code-5" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-5-title">
  <div class="admonition-title">
  <div id="admonition-code-5-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-5"></a>
  </div>
  <div>
<pre><code class="language-kt">@Composable
fun BandSelection(selectedBand : Band, onBandSelected: (Band) -&gt; Unit){
    var expanded by remember { mutableStateOf(false)}

    Row(
    modifier = Modifier.fillMaxWidth(),
        horizontalArrangement = Arrangement.Center
    ){
        Box(modifier = Modifier
            .background(Color(0XFFE3E3E1), RoundedCornerShape(8.dp))
            .padding(8.dp)
            .fillMaxWidth()
        ){
            TextButton(
                onClick = { expanded = true },
                modifier = Modifier.fillMaxWidth())
            {
                Row(modifier = Modifier.fillMaxWidth())
                {
                
                }
            }
        }
    }
}
</code></pre>
  </div>
  </div>
  <div id="admonition-notes-on-composables-used-2" class="admonition admonish-info" role="note" aria-labelledby="admonition-notes-on-composables-used-2-title">
  <div class="admonition-title">
  <div id="admonition-notes-on-composables-used-2-title">
<p>Notes on Composables Used:</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-notes-on-composables-used-2"></a>
  </div>
  <div>
<ul>
<li>
<p><strong>remember</strong>: <code>remember</code> is a composable function that allows a state to be remembered across recompositions</p>
</li>
<li>
<p><strong>mutableStateOf</strong>: <code>mutableStateOf</code> is used to create a state variable that can be observed for changes.</p>
</li>
<li>
<p>Putting both together, they are used to hold and manage state in Jetpack Compose.</p>
</li>
<li>
<p><strong>Box</strong>: A layout composable that places its children on top of each other (like a stack) with the first child on the bottom</p>
</li>
<li>
<p><strong>TextButton</strong>: A button composable that displays text. It is used for simple text-based buttons without background or elevation</p>
</li>
<li>
<p><strong>onBandSelection</strong>: A lambda function that takes a <code>Band</code> as a parameter and returns <code>Unit</code>. This function is called when a new band is selected, allowing the rent composable to update the selected band.</p>
</li>
<li>
<p><strong>Unit</strong>: is a type that corresponds to <code>void</code> in other programming languages. It is used to indicate that a function does not return any meaningful value. When a function returns <code>Unit</code>, it means that the function's purpose is to perform some action rather than produce a result.</p>
</li>
</ul>
  </div>
  </div>
<p><img src="./figures/BandSelectionDefinition2.png" alt="" /></p>
</li>
<li>
<p>Go back to the top of the <code>ConcertTicketApp</code> and add a new remember initialisation so that when a band is selected and the recompostion is invoked the band selected is stored presistently across recompositions.</p>
 <div id="admonition-code-6" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-6-title">
 <div class="admonition-title">
 <div id="admonition-code-6-title">
<p>Code</p>
 </div>
 <a class="admonition-anchor-link" href="#admonition-code-6"></a>
 </div>
 <div>
<pre><code class="language-kt">
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ConcertTicketApp(){
    var selectedBand by remember { mutableStateOf(BandDataSource.bands[0]) }
    ...
}
</code></pre>
 </div>
 </div>
 <div id="admonition-info-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-1-title">
 <div class="admonition-title">
 <div id="admonition-info-1-title">
<p>Info</p>
 </div>
 <a class="admonition-anchor-link" href="#admonition-info-1"></a>
 </div>
 <div>
<p><strong>mutableStateOf(BandDataSource.bands[0])</strong>: Initially, when the app loads the <code>selectedBand</code> stores the the first element in the <code>BandDataSource</code>, everytime a new selection is made the <code>selectedBand</code> will store the current selected index</p>
 </div>
 </div>
</li>
<li>
<p>Update the Surface too, so that we can preview the <code>BandSelection</code></p>
  <div id="admonition-code-7" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-7-title">
  <div class="admonition-title">
  <div id="admonition-code-7-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-7"></a>
  </div>
  <div>
<pre><code class="language-kt">...
Surface(modifier = Modifier.padding(innerPadding)) {
Column(modifier = Modifier.fillMaxSize()) {
    BandSelection(selectedBand = selectedBand) {selectedBand = it }
...

</code></pre>
  </div>
  </div>
  <div id="admonition-info-2" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-2-title">
  <div class="admonition-title">
  <div id="admonition-info-2-title">
<p>Info</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-info-2"></a>
  </div>
  <div>
<p>Lambda Function <code>{selectedBand = it}</code>: The lambda function takes a band (<code>it</code>) as a parameter and assigns it to the <code>selectedBand</code> variable. This updates the state with the newly selected band.</p>
  </div>
  </div>
<p><img src="./figures/BandSelectionDefinition3.png" alt="" /></p>
</li>
<li>
<p>Continue modifying the <code>BandSelection</code> composable <code>Row</code> so:</p>
 <div id="admonition-code-8" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-8-title">
 <div class="admonition-title">
 <div id="admonition-code-8-title">
<p>Code</p>
 </div>
 <a class="admonition-anchor-link" href="#admonition-code-8"></a>
 </div>
 <div>
<pre><code class="language-kt">...
Row(modifier = Modifier.fillMaxWidth())
{
    Text(
        text = selectedBand.name,
        color = Color(0XFF1E2C41),
        fontSize = 25.sp)
    Icon(imageVector = ImageVector
        .vectorResource(id = R.drawable.ic_baseline_arrow_drop_down),
        contentDescription = "Dropdown Arrow",
        tint = Color.Black)
}
...
</code></pre>
 </div>
 </div>
<ul>
<li>
<p>You need to create the <code>ic_baseline_arrow_drop_down</code> assest, copy the code in the collaspable field below and create a new image resource :</p>
  <details id="admonition-code-ic_baseline_arrow_drop_down-xml-code" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-ic_baseline_arrow_drop_down-xml-code-title">
  <summary class="admonition-title">
  <div id="admonition-code-ic_baseline_arrow_drop_down-xml-code-title">
<p>Code: ic_baseline_arrow_drop_down xml code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-ic_baseline_arrow_drop_down-xml-code"></a>
  </summary>
  <div>
<pre><code class="language-xml">&lt;vector xmlns:android="http://schemas.android.com/apk/res/android" android:height="24dp" android:viewportHeight="24" android:viewportWidth="24" android:width="24dp"&gt;

&lt;path android:fillColor="#000000" android:fillType="evenOdd" android:pathData="M12.707,14.707C12.317,15.098 11.683,15.098 11.293,14.707L6.293,9.707C5.902,9.317 5.902,8.683 6.293,8.293C6.683,7.902 7.317,7.902 7.707,8.293L12,12.586L16.293,8.293C16.683,7.902 17.317,7.902 17.707,8.293C18.098,8.683 18.098,9.317 17.707,9.707L12.707,14.707Z"/&gt;

&lt;/vector&gt;
</code></pre>
<p><img src="./figures/dropDownArrow.gif" alt="" /></p>
  </div>
  </details>
<p><img src="./figures/BandSelectionDefinition4.png" alt="" /></p>
</li>
</ul>
</li>
<li>
<p>Following on we need to add the <code>DropDownMenuItem</code>'s so that the <code>DropDownMenu</code> can display each <code>Band</code> name from the dropdown list:</p>
 <div id="admonition-code-9" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-9-title">
 <div class="admonition-title">
 <div id="admonition-code-9-title">
<p>Code</p>
 </div>
 <a class="admonition-anchor-link" href="#admonition-code-9"></a>
 </div>
 <div>
<pre><code class="language-kt">...
DropdownMenu(
            expanded = expanded,
            onDismissRequest = { expanded = false },
            modifier = Modifier
                .background(Color(0XFFE3E3E6))
                .width(400.dp)) {
            BandDataSource.bands.forEach { band -&gt;
                DropdownMenuItem(text = {
                    Text(
                        text = band.name,
                        color = Color(0XFF1E2C41),
                        fontSize = 25.sp)
                }, onClick = {
                    onBandSelected(band)
                    expanded = false})
            }
        }
...
</code></pre>
 </div>
 </div>
 <div id="admonition-info-3" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-3-title">
 <div class="admonition-title">
 <div id="admonition-info-3-title">
<p>Info</p>
 </div>
 <a class="admonition-anchor-link" href="#admonition-info-3"></a>
 </div>
 <div>
<ul>
<li>
<p>This block dynamically creates a list of dropdown menu items for each band.#</p>
<ul>
<li>Each item's text is the band's name, styled with a specific color and font size.</li>
<li>Clicking an item triggers a selection function and closes the dropdown menu.</li>
</ul>
</li>
<li>
<p><strong>BandDataSource.bands.forEach { band -&gt;</strong>: this line iterates through a list of bands provided by <code>BandDataSource.bands</code>, for each band in the list, the code ide the <code>forEach</code> block is executed.</p>
<ul>
<li><strong>DropdownMenuItem</strong>: Menus display a list of choices on a temporary surface. They appear when users interact with a button, action, or other control.</li>
</ul>
</li>
</ul>
 </div>
 </div>
<p><img src="./figures/selectBandDropdown_1.gif" alt="" /></p>
</li>
</ul>
<h2 id="bandselection-band-image"><a class="header" href="#bandselection-band-image">BandSelection, Band Image</a></h2>
<h3 id="video--4410---4635"><a class="header" href="#video--4410---4635">Video @ 44.10 - 46.35</a></h3>
<ul>
<li>
<p>Go  back up to the <code>Surface</code> where we invoke our <code>BandSelection(...){...}</code>, and reproduce the new lines below, several comments and a new function call <code>BandImage(selectedBand)</code> below:</p>
  <div id="admonition-code-10" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-10-title">
  <div class="admonition-title">
  <div id="admonition-code-10-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-10"></a>
  </div>
  <div>
<pre><code class="language-kt">...

innerPadding -&gt;
Surface(modifier = Modifier.padding(innerPadding)) {
    Column(modifier = Modifier.fillMaxSize()) {
        BandSelection(selectedBand = selectedBand) {selectedBand = it }
        //Text FOR TICKET COST
        //Calcuate the cost
        // Display the cost
        // display Band image
        BandImage(selectedBand)
    }
}
...
</code></pre>
  </div>
  </div>
</li>
<li>
<p>Navigate to the end of the file and create a new composable function called <code>BandImage()</code>, like below:</p>
  <div id="admonition-code-11" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-11-title">
  <div class="admonition-title">
  <div id="admonition-code-11-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-11"></a>
  </div>
  <div>
<pre><code class="language-kt">@Composable
fun BandImage(selectedBand: Band) {
    Image(
        painter = painterResource(id = selectedBand.imageRes),
        contentDescription = null,
        contentScale = ContentScale.Fit,
        alignment = Alignment.Center,
        modifier = Modifier
            .fillMaxWidth()
            .height(300.dp))
}
</code></pre>
  </div>
  </div>
<p><img src="./figures/selectBandDropdown_2.png" alt="" /></p>
</li>
</ul>
<h2 id="bandselection-ticketcost"><a class="header" href="#bandselection-ticketcost">BandSelection, TicketCost</a></h2>
<h3 id="video--4635---5125"><a class="header" href="#video--4635---5125">Video @ 46.35 - 51.25</a></h3>
<ul>
<li>
<p>Go  back up to the <code>Surface</code> where we invoke our <code>BandSelection(...){...}</code>, and reproduce the new lines below, several comments and a new function call <code>TicketInput(ticketCost)</code> below:</p>
  <div id="admonition-code-12" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-12-title">
  <div class="admonition-title">
  <div id="admonition-code-12-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-12"></a>
  </div>
  <div>
<pre><code class="language-kt">innerPadding -&gt;
        Surface(modifier = Modifier.padding(innerPadding)) {
            Column(modifier = Modifier.fillMaxSize()) {
                BandSelection(selectedBand = selectedBand) {selectedBand = it }
                //Text FOR TICKET COST
                TicketInput(ticketCount){ticketCount = it}
                //Calcuate the cost
                // Display the cost
                // display Band image
                BandImage(selectedBand)
            }
        }
</code></pre>
  </div>
  </div>
</li>
<li>
<p>Go back to the top of the <code>ConcertTicketApp</code> and add a new remember initialisation so that when you use the input field and it recomposes each time the userinput is presistent,called <code>ticketCount</code>.</p>
 <div id="admonition-code-13" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-13-title">
 <div class="admonition-title">
 <div id="admonition-code-13-title">
<p>Code</p>
 </div>
 <a class="admonition-anchor-link" href="#admonition-code-13"></a>
 </div>
 <div>
<pre><code class="language-kt">
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ConcertTicketApp(){
    var selectedBand by remember { mutableStateOf(BandDataSource.bands[0]) }
    var ticketCount by remember { mutableStateOf("") }  
    ...
}
</code></pre>
 </div>
 </div>
 <div id="admonition-info-4" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-4-title">
 <div class="admonition-title">
 <div id="admonition-info-4-title">
<p>Info</p>
 </div>
 <a class="admonition-anchor-link" href="#admonition-info-4"></a>
 </div>
 <div>
<ul>
<li><strong>mutableStateOf("")</strong>: Initially, when the app loads the <code>TextInput</code> composable, the field is empty. Then when a user enters a character the value is stored across recompositions.</li>
</ul>
 </div>
 </div>
</li>
<li>
<p>Navigate to the <code>BandImage(...)</code> function and above the declaration add the new function <code>TextInput()</code>:</p>
  <div id="admonition-code-14" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-14-title">
  <div class="admonition-title">
  <div id="admonition-code-14-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-14"></a>
  </div>
  <div>
<pre><code class="language-kt">@Composable
fun TicketInput(ticketCount: String, onTicketCountChange: (String) -&gt; Unit){
    TextField(value = ticketCount, onValueChange = onTicketCountChange,
        label = { Text(text = "Number of Tickets")},
        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),
        modifier = Modifier.fillMaxWidth()
    )
}
</code></pre>
  </div>
  </div>
</li>
</ul>
<h2 id="bandselection-calculatecostbutton"><a class="header" href="#bandselection-calculatecostbutton">BandSelection, CalculateCostButton</a></h2>
<h3 id="video--5125---10317"><a class="header" href="#video--5125---10317">Video @ 51.25 - 1:03:17</a></h3>
<ul>
<li>
<p>Navigate back to <code>Surface</code> and update the code to create some spacing between <code>Composable</code>'s, a new function call <code>CalcualteCostButton</code> and create a new <code>remember</code> type called <code>totalCost</code>:</p>
  <div id="admonition-code-15" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-15-title">
  <div class="admonition-title">
  <div id="admonition-code-15-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-15"></a>
  </div>
  <div>
<pre><code class="language-kt">innerPadding -&gt;
    Surface(modifier = Modifier.padding(innerPadding)) {
        Column(modifier = Modifier.fillMaxSize()) {
            BandSelection(selectedBand = selectedBand) {selectedBand = it }
            Spacer(modifier = Modifier.height(32.dp))
            //Text FOR TICKET COST
            TicketInput(ticketCount){ticketCount = it}
            Spacer(modifier = Modifier.height(42.dp))
            //Calcuate the cost
            CalculateCostButton(selectedBand,ticketCount){totalCost = it}
            Spacer(modifier = Modifier.height(42.dp))
            // Display the cost
            // display Band image
            BandImage(selectedBand)
        }
    }
</code></pre>
  </div>
  </div>
<ul>
<li>
<p><code>totalCost</code> <code>remember</code> type:</p>
  <div id="admonition-code-16" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-16-title">
  <div class="admonition-title">
  <div id="admonition-code-16-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-16"></a>
  </div>
  <div>
<pre><code class="language-kt">
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ConcertTicketApp(){
    var selectedBand by remember { mutableStateOf(BandDataSource.bands[0]) }
    var ticketCount by remember { mutableStateOf("") }
    var totalCost by remember { mutableStateOf("") }
    ...
</code></pre>
  </div>
  </div>
<p><img src="./figures/mainLayout_1.png" alt="" /></p>
</li>
</ul>
</li>
<li>
<p>Navigate to the <code>TextInput()</code> <code>Composable</code>, and declare the newly referenced function <code>CalculateCostButton</code>:</p>
  <div id="admonition-code-17" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-17-title">
  <div class="admonition-title">
  <div id="admonition-code-17-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-17"></a>
  </div>
  <div>
<pre><code class="language-kt">@Composable
fun CalculateCostButton(selectedBand: Band,ticketCount: String,onCalculate: (String) -&gt; Unit){
    val costPerTicket = selectedBand.price
    val format: NumberFormat = NumberFormat.getCurrencyInstance().apply {
        currency = Currency.getInstance("GBP")
        maximumFractionDigits = 2
        minimumFractionDigits = 2
    }

}
</code></pre>
  </div>
  </div>
  <div id="admonition-info-5" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-5-title">
  <div class="admonition-title">
  <div id="admonition-info-5-title">
<p>Info</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-info-5"></a>
  </div>
  <div>
<p><strong>NumberFormat</strong>: used to format numbers as currency, specifically in this instance GBP (British Pounds). It sets up a <code>NumberFormat</code> instance that ensures all currency values have exactly two decimal places.</p>
  </div>
  </div>
</li>
<li>
<p>Next in side the body of the function use the <code>Button</code> <code>Composable</code>:</p>
  <div id="admonition-code-18" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-18-title">
  <div class="admonition-title">
  <div id="admonition-code-18-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-18"></a>
  </div>
  <div>
<pre><code class="language-kt">Button(onClick = {
    val count = ticketCount.toIntOrNull() ?: 0
    if (selectedBand.name == "Select a Band"){
        onCalculate("Please Select a Band")
    }
    else if (count &lt;= 0){
        onCalculate("Enter value greater than 0")
    }
    else{
        val total = costPerTicket * count
        onCalculate("Cost for ${selectedBand.name} is ${format.format(total)}")
    }

},
    modifier = Modifier
        .fillMaxWidth()
        .height(65.dp),
    colors = ButtonDefaults.buttonColors(contentColor = Color(0XFF1E2C41))
    ) {
    Text(text = "Find Cost", fontSize = 20.sp, color = Color.White)

}
</code></pre>
  </div>
  </div>
  <div id="admonition-info-6" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-6-title">
  <div class="admonition-title">
  <div id="admonition-info-6-title">
<p>Info</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-info-6"></a>
  </div>
  <div>
<ul>
<li>
<p><strong>val count = ticketCount.toIntOrNull() ?: 0</strong>: <code>ticketCount.toIntOrNull()</code> attempts to convert the <code>ticketCount</code> string to an integer.</p>
<ul>
<li>If the conversion fails (i.e., <code>ticketCount</code> is not a valid integer), <code>toIntOrNull()</code> returns <code>null</code>, and the <strong>Elvis</strong> operator (<code>?:</code>) assigns <code>0</code> to <code>count</code>.</li>
<li>This ensures that count is always an integer, defaulting to <code>0</code> if the conversion fails</li>
</ul>
</li>
<li>
<p><strong>onCalculate("Cost for ${selectedBand.name} is ${format.format(total)}")</strong>:</p>
<ul>
<li>"<code>Cost for ${selectedBand.name} is ${format.format(total)}</code>": This is a string with interpolated expressions inside it. In Kotlin, string interpolation allows u to include variables or expressions within a string by enclosing them in <code>${}</code></li>
</ul>
</li>
<li>
<p><strong>${selectedBand.name}</strong>: This expression accesses the name property of the <code>selectedBand</code> object and inserts its value into the string.</p>
</li>
<li>
<p><strong>${format.format(total)}</strong>: This expression formats the total value as a currency string using the format object, which is an instance of <code>NumberFormat</code> configured for currency formatting.</p>
</li>
</ul>
  </div>
  </div>
<p><img src="./figures/mainLayout_2.png" alt="" /></p>
</li>
</ul>
<h2 id="bandselection-costdisplay"><a class="header" href="#bandselection-costdisplay">BandSelection, CostDisplay</a></h2>
<h3 id="video--10317---10538"><a class="header" href="#video--10317---10538">Video @ 1:03:17 - 1:05:38</a></h3>
<ul>
<li>
<p>Navigate back to <code>Surface</code> and update the code to create some spacing between <code>Composable</code>'s, a new function call <code>CostDisplay</code>:</p>
  <div id="admonition-code-19" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-19-title">
  <div class="admonition-title">
  <div id="admonition-code-19-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-19"></a>
  </div>
  <div>
<pre><code class="language-kt">innerPadding -&gt;
        Surface(modifier = Modifier.padding(innerPadding)) {
            Column(modifier = Modifier.fillMaxSize()) {
                BandSelection(selectedBand = selectedBand) {selectedBand = it }
                Spacer(modifier = Modifier.height(32.dp))
                //Text FOR TICKET COST
                TicketInput(ticketCount){ticketCount = it}
                Spacer(modifier = Modifier.height(42.dp))
                //Calcuate the cost
                CalculateCostButton(selectedBand,ticketCount){totalCost = it}
                Spacer(modifier = Modifier.height(42.dp))
                // Display the cost
                CostDisplay(totalCost)
                Spacer(modifier = Modifier.height(42.dp))
                // display Band image
                BandImage(selectedBand)
            }
        }
</code></pre>
  </div>
  </div>
</li>
<li>
<p>Navigate to the <code>BandImage()</code> <code>Composable</code>, and declare the newly referenced function <code>CostDisplay</code>:</p>
  <div id="admonition-code-20" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-20-title">
  <div class="admonition-title">
  <div id="admonition-code-20-title">
<p>Code</p>
  </div>
  <a class="admonition-anchor-link" href="#admonition-code-20"></a>
  </div>
  <div>
<pre><code class="language-kt">@Composable
fun CostDisplay(totalCost : String){
Text(
    text = totalCost,
    fontSize = 20.sp,
    color = Color.Black,
    modifier =  Modifier.fillMaxWidth(),
    textAlign = TextAlign.Center)

}
</code></pre>
  </div>
  </div>
<p><img src="./figures/mainLayout_3.png" alt="" /></p>
</li>
</ul>
<hr />
<table>
<tr>
<td style="width: 50%; padding: 10px; border: 0px solid #ddd;">
<p>If you run the app you should now be able to reproduce the following:</p>
</td>
<td style="width: 50%; padding: 10px; border: 0px solid #ddd;">
<img src="./figures/demo.gif" alt="Demo of App" >
</td>
</tr>
</table>
<hr />
<details id="admonition-code-whole-program-255-lines" class="admonition admonish-code" role="note" aria-labelledby="admonition-code-whole-program-255-lines-title">
<summary class="admonition-title">
<div id="admonition-code-whole-program-255-lines-title">
<p>Code: whole program [255 lines]...</p>
</div>
<a class="admonition-anchor-link" href="#admonition-code-whole-program-255-lines"></a>
</summary>
<div>
<pre><code class="language-kt">package com.uog.concerttickets

import android.icu.text.NumberFormat
import android.icu.util.Currency
import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.activity.enableEdgeToEdge
import androidx.collection.mutableObjectIntMapOf
import androidx.compose.foundation.Image
import androidx.compose.foundation.background
import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.shape.RoundedCornerShape
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material3.Button
import androidx.compose.material3.ButtonDefaults
import androidx.compose.material3.DropdownMenu
import androidx.compose.material3.DropdownMenuItem
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.Scaffold
import androidx.compose.material3.Surface
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.material3.TextField
import androidx.compose.material3.TopAppBar
import androidx.compose.runtime.Composable
import androidx.compose.runtime.currentComposer
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.vector.ImageVector
import androidx.compose.ui.layout.ContentScale
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.res.vectorResource
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import com.uog.concerttickets.ui.theme.ConcertTicketsTheme

data class Band(val name: String, val imageRes: Int, val price: Float)

object BandDataSource {

    val bands = listOf(
        Band("Select a Band", R.mipmap.concert,0.0f),
        Band("Written By Wolves", R.mipmap.written_by_wolves,24.95f),
        Band("Linkin Park", R.mipmap.linkin_park,63.95f),
        Band("Man with a Mission", R.mipmap.man_with_a_mission,36.00f),
        Band("Hollywood Undead", R.mipmap.hollywood_undead,125.00f)
    )
}

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            ConcertTicketsTheme {
               ConcertTicketApp()
            }
        }
    }
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ConcertTicketApp(){
    var selectedBand by remember { mutableStateOf(BandDataSource.bands[0]) }
    var ticketCount by remember { mutableStateOf("") }
    var totalCost by remember { mutableStateOf("") }

    Scaffold(
        topBar = {
            TopAppBar(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(50.dp),
                title = {
                    Row(
                        verticalAlignment = Alignment.CenterVertically,
                        modifier = Modifier.fillMaxWidth()
                    ){
                        Image(painter = painterResource(id = R.mipmap.concert_ticket_logo),
                            contentDescription = "App Logo",
                            modifier = Modifier.size(50.dp))

                        Spacer(modifier = Modifier
                            .align(alignment = Alignment.CenterVertically)
                            .background(Color.White))

                        Text(text = stringResource(id = R.string.app_name), fontWeight = FontWeight.Bold,
                            color = Color(0XFF1E2C41))
                    }
                 }
            )
        }
    ) { innerPadding -&gt;
        Surface(modifier = Modifier.padding(innerPadding)) {
            Column(modifier = Modifier.fillMaxSize()) {
                BandSelection(selectedBand = selectedBand) {selectedBand = it }
                Spacer(modifier = Modifier.height(32.dp))
                //Text FOR TICKET COST
                TicketInput(ticketCount){ticketCount = it}
                Spacer(modifier = Modifier.height(42.dp))
                //Calcuate the cost
                CalculateCostButton(selectedBand,ticketCount){totalCost = it}
                Spacer(modifier = Modifier.height(42.dp))
                // Display the cost
                CostDisplay(totalCost)
                Spacer(modifier = Modifier.height(42.dp))
                // display Band image
                BandImage(selectedBand)
            }
        }

    }
}

@Composable
fun BandSelection(selectedBand : Band, onBandSelected: (Band) -&gt; Unit){
    var expanded by remember { mutableStateOf(false)}

    Row(
       modifier = Modifier.fillMaxWidth(),
        horizontalArrangement = Arrangement.Center
    ){
        Box(modifier = Modifier
            .background(Color(0XFFE3E3E1), RoundedCornerShape(8.dp))
            .padding(8.dp)
            .fillMaxWidth()
        ){
            TextButton(
                onClick = { expanded = true },
                modifier = Modifier.fillMaxWidth())
            {
                Row(modifier = Modifier.fillMaxWidth())
                {
                    Text(
                        text = selectedBand.name,
                        color = Color(0XFF1E2C41),
                        fontSize = 25.sp)
                    Icon(imageVector = ImageVector
                        .vectorResource(id = R.drawable.ic_baseline_arrow_drop_down),
                        contentDescription = "Dropdown Arrow",
                        tint = Color.Black)
                }
            }
            DropdownMenu(
                expanded = expanded,
                onDismissRequest = { expanded = false },
                modifier = Modifier
                    .background(Color(0XFFE3E3E6))
                    .width(400.dp)) {
                BandDataSource.bands.forEach { band -&gt;
                    DropdownMenuItem(text = {
                        Text(
                            text = band.name,
                            color = Color(0XFF1E2C41),
                            fontSize = 25.sp)
                    }, onClick = {
                        onBandSelected(band)
                        expanded = false})
                }
            }
        }
    }
}

@Composable
fun TicketInput(ticketCount: String, onTicketCountChange: (String) -&gt; Unit){
    TextField(value = ticketCount, onValueChange = onTicketCountChange,
        label = { Text(text = "Number of Tickets")},
        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number),
        modifier = Modifier.fillMaxWidth()
    )
}

@Composable
fun CalculateCostButton(selectedBand: Band,ticketCount: String,onCalculate: (String) -&gt; Unit){
    val costPerTicket = selectedBand.price
    val format: NumberFormat = NumberFormat.getCurrencyInstance().apply {
        currency = Currency.getInstance("GBP")
        maximumFractionDigits = 2
        minimumFractionDigits = 2
    }

    Button(onClick = {
        val count = ticketCount.toIntOrNull() ?: 0
        if (selectedBand.name == "Select a Band"){
            onCalculate("Please Select a Band")
        }
        else if (count &lt;= 0){
            onCalculate("Enter value greater than 0")
        }
        else{
            val total = costPerTicket * count
            onCalculate("Cost for ${selectedBand.name} is ${format.format(total)}")
        }

    },
        modifier = Modifier
            .fillMaxWidth()
            .height(65.dp),
        colors = ButtonDefaults.buttonColors(contentColor = Color(0XFF1E2C41))
        ) {
        Text(text = "Find Cost", fontSize = 20.sp, color = Color.White)

    }
}

@Composable
fun CostDisplay(totalCost : String){
Text(
    text = totalCost,
    fontSize = 20.sp,
    color = Color.Black,
    modifier =  Modifier.fillMaxWidth(),
    textAlign = TextAlign.Center)

}

@Composable
fun BandImage(selectedBand: Band) {
    Image(
        painter = painterResource(id = selectedBand.imageRes),
        contentDescription = null,
        contentScale = ContentScale.Fit,
        alignment = Alignment.Center,
        modifier = Modifier
            .fillMaxWidth()
            .height(300.dp))
}

@Preview(showBackground = true)
@Composable
fun GreetingPreview() {
    ConcertTicketsTheme {
        ConcertTicketApp()
    }
}
</code></pre>
</div>
</details>
<hr />
<h2 id="continue-here"><a class="header" href="#continue-here">Continue Here...</a></h2>
<div id="admonition-info-7" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-7-title">
<div class="admonition-title">
<div id="admonition-info-7-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="#admonition-info-7"></a>
</div>
<div>
<p>You will need to download the following picture folder -&gt; <a href="Lab_4-2_Pictures.zip">Lab_4-2_Picture.zip</a></p>
</div>
</div>
<p>For the exercises below, follow the steps in the Ticket Vault example (above).</p>
<h2 id="1-catalina-island-boat-express-app"><a class="header" href="#1-catalina-island-boat-express-app">1. Catalina Island Boat Express App</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Application Title</th><th>Catalina Island Boat Express App</th></tr></thead><tbody>
<tr><td>Purpose</td><td>Catalina Express has 30 daily departures between Long Beach and Catalina Island. Create a simple app that determines how many boat tickets the user needs and whether the ticket is for going to Catalina Island or heading back to Long Beach. The app displays the total price for the fare in one direction</td></tr>
<tr><td>Algorithm 1:</td><td>The app displays a title; an image (provided in the Pictures folder at top of workbook), and a Text Field, Spinner, and Button control. The two options in the Spinner control include To Catalina Island and To Long Beach. Each single passenger ticket is $34 for one way.</td></tr>
<tr><td>Algorithm 2:</td><td>When the user taps or clicks the Button control, the number of tickets and the total cost of the fare is displayed</td></tr>
<tr><td>Alogrithm 3:</td><td>Use a black theme, Spinner prompt, string array, and a hint property.</td></tr>
</tbody></table>
</div><div align=center>
<p><img src="figures/catalina.png" alt="h:500" /></p>
</div>
<hr />
<h2 id="2-triathlon-registration-app"><a class="header" href="#2-triathlon-registration-app">2. Triathlon Registration App</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Application Title</th><th>Triathlon Registration App</th></tr></thead><tbody>
<tr><td>Purpose</td><td>A triathlon registration app allows an athlete to register for one of three national triathlons to qualify for the Ironman World Championship</td></tr>
<tr><td>Algorithm 1:</td><td>The triathlon registration app has two Text Fields: one requests the number of athletes on the user‚Äôs team and the other requests the location. A Spinner control allows the athlete to select one of three possible locations: Lake Placid, Big Island Hawaii, and Miami. The app also displays a title, an image (called triathlon.png in the Pictures folder you downloaded) and a Button control.</td></tr>
<tr><td>Algorithm 2:</td><td>After the user clicks the Button control, the selected location and the total team coast are displayed in the TextView control.</td></tr>
<tr><td>Algorithm 3:</td><td>Use a theme, a title, an image, a Spinner prompt, a string array, and a hint property</td></tr>
</tbody></table>
</div><div align=center>
<p><img src="./figures/triathlon.png" alt="" /></p>
</div>
<hr />
<h2 id="3-medway-cab-fare-app"><a class="header" href="#3-medway-cab-fare-app">3. Medway Cab Fare App</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Application Title</th><th>Medway Cab Fare App</th></tr></thead><tbody>
<tr><td>Purpose</td><td>Create an app that estimates the cost for cab fare in Medway. The app calculates the cost of the trip and request a reservation for a smart car, traditional sedan or a minivan</td></tr>
<tr><td>Algorithm 1:</td><td>The app requests the distance in miles for the cab ride and your preference for the requested cab: a smart car, traditional sedan or a minivan.  The cab fare has an initial fee of ¬£3.00. The mileage rate of ¬£3.50 is also charged.</td></tr>
<tr><td>Algorithm 2:</td><td>The app displays the name of a cab company (do your own research what kind of cab companies are available in Medway and choose one), a picture of a logo, and the results of the requested type of cab with the cost of the fare. Create your own layout.</td></tr>
<tr><td>Algorithm 3:</td><td>Use a theme, Spinner prompt, string array, and hint property.  Decimal mileage is possible.</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="4-split-the-bill-app"><a class="header" href="#4-split-the-bill-app">4. Split the Bill App</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Application Title</th><th>Split the Bill App</th></tr></thead><tbody>
<tr><td>Purpose</td><td>You are out with friends at a nice restaurant.  This app splits the bill, including the tip, among the members of your party.</td></tr>
<tr><td>Algorithm 1:</td><td>A welcome screen displays the title, image, and button that displays a second screen when clicked. The input/output screen requests the restaurant bill and the number of people in your group. The Spinner control asks about the quality of service: Excellent, Average or Poor.</td></tr>
<tr><td>Algorithm 2:</td><td>Calculate a 15% tip and divide the restaurant bill with the tip included among the members of your party. Display the tip amount and the individual share of the bill.</td></tr>
<tr><td>Algorithm 3:</td><td>Use a theme, Spinner prompt, string array, and hint property.</td></tr>
</tbody></table>
</div><footer><span class="gitinfo-footer" style="font-size:0.8em;padding:4px;margin:0.5em 0;text-align:right;display:block;">Page last updated: Wednesday 02 July 2025 @ 19:01:36 | Commit: 4910348</span></footer>
                    </main>
                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../Kotlin/Lab_3/Lab_3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../Kotlin/Lab_5/Lab_5.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../Kotlin/Lab_3/Lab_3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../Kotlin/Lab_5/Lab_5.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../.././theme/pagetoc.js"></script>
        <script src="../.././theme/highlightjs-line-numbers.js"></script>


    </div>
    </body>
</html>